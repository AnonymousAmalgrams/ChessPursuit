function J(){this.B=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;.01>this.c&&(this.c=.01),a=this.b+this.c+this.e,.18>a&&(a=.18/a,this.b*=a,this.c*=a,this.e*=a)}}var W=new function(){this.A=new J;var a,b,c,d,e,f,g,h,i,j,k,l;this.reset=function(){var a=this.A;d=100/(a.f*a.f+.001),e=100/(a.g*a.g+.001),f=1-a.h*a.h*a.h*.01,g=-a.i*a.i*a.i*1e-6,a.a||(k=.5-a.n/2,l=5e-5*-a.o),h=1+a.l*a.l*(0<a.l?-.9:10),i=0,j=1==a.m?0:(1-a.m)*(1-a.m)*2e4+32},this.D=function(){this.reset();var d=this.A;return a=d.b*d.b*1e5,b=d.c*d.c*1e5,c=d.e*d.e*1e5+12,3*((a+b+c)/3|0)},this.C=function(m,n){var o=this.A,p=1!=o.s||o.v,q=o.v*o.v*.1,r=1+3e-4*o.w,s=o.s*o.s*o.s*.1,t=1+1e-4*o.t,u=1!=o.s,v=o.x*o.x,w=o.g,x=o.q||o.r,y=o.r*o.r*o.r*.2,z=o.q*o.q*(0>o.q?-1020:1020),A=o.p?((1-o.p)*(1-o.p)*2e4|0)+32:0,B=o.d,C=o.j/2,D=o.k*o.k*.01,E=o.a,F=a,G=1/a,H=1/b,I=1/c,o=5/(1+o.u*o.u*20)*(.01+s);o>.8&&(o=.8);for(var J,K,L,M,N,o=1-o,O=!1,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=Array(1024),$=Array(32),_=Z.length;_--;)Z[_]=0;for(_=$.length;_--;)$[_]=2*Math.random()-1;for(_=0;n>_;_++){if(O)return _;if(A&&++X>=A&&(X=0,this.reset()),j&&++i>=j&&(j=0,d*=h),f+=g,d*=f,d>e&&(d=e,w>0&&(O=!0)),K=d,C>0&&(Y+=D,K*=1+Math.sin(Y)*C),K|=0,8>K&&(K=8),E||(k+=l,0>k?k=0:k>.5&&(k=.5)),++Q>F)switch(Q=0,++P){case 1:F=b;break;case 2:F=c}switch(P){case 0:R=Q*G;break;case 1:R=1+2*(1-Q*H)*B;break;case 2:R=1-Q*I;break;case 3:R=0,O=!0}x&&(z+=y,L=0|z,0>L?L=-L:L>1023&&(L=1023)),p&&r&&(q*=r,1e-5>q?q=1e-5:q>.1&&(q=.1)),N=0;for(var ab=8;ab--;){if(V++,V>=K&&(V%=K,3==E))for(J=$.length;J--;)$[J]=2*Math.random()-1;switch(E){case 0:M=k>V/K?.5:-.5;break;case 1:M=1-V/K*2;break;case 2:M=V/K,M=6.28318531*(M>.5?M-1:M),M=1.27323954*M+.405284735*M*M*(0>M?1:-1),M=.225*((0>M?-1:1)*M*M-M)+M;break;case 3:M=$[Math.abs(32*V/K|0)]}p&&(J=U,s*=t,0>s?s=0:s>.1&&(s=.1),u?(T+=(M-U)*s,T*=o):(U=M,T=0),U+=T,S+=U-J,M=S*=1-q),x&&(Z[W%1024]=M,M+=Z[(W-L+1024)%1024],W++),N+=M}N=.125*N*R*v,m[_]=N>=1?32767:-1>=N?-32768:32767*N|0}return n}};window.jsfxr=function(a){W.A.B(a);var b=W.D();a=new Uint8Array(4*((b+1)/2|0)+44);var b=2*W.C(new Uint16Array(a.buffer,44),b),c=new Uint32Array(a.buffer,0,44);c[0]=1179011410,c[1]=b+36,c[2]=1163280727,c[3]=544501094,c[4]=16,c[5]=65537,c[6]=44100,c[7]=88200,c[8]=1048578,c[9]=1635017060,c[10]=b;for(var b=b+44,c=0,d="data:audio/wav;base64,";b>c;c+=3)var e=a[c]<<16|a[c+1]<<8|a[c+2],d=d+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&e]);return d};var aa;!function(){function a(){this.sounds={}}a.prototype.add=function(a,b,c){this.sounds[a]=[],c.forEach(function(c,d){this.sounds[a].push({tick:0,count:b,pool:[]});for(var e=0;b>e;e++){var f=new Audio;f.src=jsfxr(c),this.sounds[a][d].pool.push(f)}},this)},a.prototype.play=function(a){var b=this.sounds[a],c=b.length>1?b[Math.floor(Math.random()*b.length)]:b[0];c.pool[c.tick].play(),c.tick<c.count-1?c.tick++:c.tick=0},aa=new a,aa.add("start",1,[[0,.2,.13,.01,,.3328,,,,,,,,.0994,,,,,1,,,.1,,.5]]),aa.add("right",5,[[3,1,.3197,.7823,.2124,.1117,,.091,,,,,,,,.3901,.1061,-.0873,1,,,,,.5]]),aa.add("pad",1,[[0,,.0945,,.1582,.4416,,-.535,,,,,,.3856,,,,,1,,,.0896,,.5]]),aa.add("boost",1,[[0,,.2833,,.1918,.4914,,.2408,,,,,,.0182,,,,,1,,,,,.5]]),aa.add("ring",5,[[0,,.0177,.565,.2893,.4147,,,,,,.4159,.6958,,,,,,1,,,,,.5]]),aa.add("bumper",1,[[0,,.2389,,.2437,.5057,,.164,,,,,,.1032,,,,,1,,,,,.5]]),aa.add("hurt",1,[[0,,.2056,,.2341,.2899,,.3315,,,,,,.1817,,.6354,,,1,,,,,.5]]),aa.add("eat",1,[[0,,.3402,,.2772,.4978,,.1736,,.2589,.3885,,,.1153,,,,,1,,,,,.5]]),aa.add("die",1,[[3,,.296,.6924,.1761,.2478,,.0895,,,,-.6933,.8848,,,,,,1,,,,,.5]])}(),window.onload=function(){"use strict";function a(){Q=O.createElement("div"),Q.id="root",P.appendChild(Q);var a=Q.style;a.position="absolute",a.left="50%",a.top="0",a.marginLeft=-V/2+"px ",v(),x(),A(),w(),c(0),j()}function b(){for(var a=mb.length-1,b=0;b<mb.length;b++)if(jb<mb[b]){b>0&&(a=b-1);break}c(a),K=null,nb=-1}function c(a){function b(){var a=R.ceil(f/2);mb.push(h+a);for(var b=0;f>b;b++){if(lb[h]=[],b==a)for(var c=0;W>c;c++)lb[h][c]={checkPoint:!0};h++}}function c(){var b,c=Array.prototype.slice.call(arguments);b="object"==typeof c[0]?c.shift():{};var d,f,i,j,k=a<mb.length,l=h;for(i=c.length-1;i>=0;i--){if(f=c[i],f.length>W)throw new Error;if(lb[h]=[],k&&""!==f)for(j=0;j<f.length;j++){var m=f.charAt(j);if(" "!==m&&"."!==m){var n=m.toLowerCase(),o=e(n,h,j);b.showThreat==n&&(d=lb[h][j]),b.intro&&(o.piece.intro=!0)}}h++}if(d)for(d.piece.showThreat=!0,i=l;h>i;i++)for(f=lb[i],j=0;W>j;j++){var p=g(i,j);p&&p.piece==d.piece&&(lb[i][j]||(lb[i][j]={}),lb[i][j].showThreat=!0)}}lb&&d(),lb=[],mb=[0];var f=5,h=0;c({intro:!0},"","","","  re r","  pppp","","","","","","","","kkkkkkkk"),c({showThreat:"p"},"","","    p","","","","",""),c("  pppp","  pppp","","  p","","     p",""," p"),c("","pppppp","","  pppppp","","pppppp","",""),c("","pp   ppp","  p p","   p","","","",""),c("","   pp","p p  p p"," p    p","","","",""),c("","    ppp","     p","ppp"," p   ppp","      p","",""),b(),c({showThreat:"r"},"","   p","","   r","","   p","",""),c("","","r"," r","  r","   r","    r","     r","pppppp"),c("","","","       p","   rp pr","","","p","r  p   p","p"),c(""," r     p","      pp","   p   r","p   p","r p p","r   p","ppppp  p"),b(),c({showThreat:"b"},"","","","...b","","","",""),c("","b b b b","","","","","",""),c("","r.p..p.r","p......p","","b      b","pp....pp","",""),c("","r"," r  p..b","     ..r","....p","...p","..p","pp.....p"),b(),c({showThreat:"k"},"","","   k","","","","",""),c("p","r.....p","","","......kk","","pkk",""),c("p   pppp","r    b r","   p b p","","",""," k","","",""),b(),c({showThreat:"l"},"","","","   l","","","",""),c("l.llllll","l.l....l","..l.llll",".ll.l   ","l...l l ","l.lll l ","l.    l ","lllllll "),c(" p  pll"," l p   l","lpl p p ","     lp","ll ll l"," l  l","",""),c("","   r"," kll","",""," l pl  b","       l","  p  l","","","","",""),b(),c("","c","","","","",""),0===a?(qb=e(zb,4,4).piece,jb=2):(jb=mb[a],qb=e(zb,jb,3).piece,jb-=4)}function d(){for(var a in lb)if(lb[a])for(var b in lb[a]){var c=lb[a][b];c&&c.piece&&z(c.piece)}}function e(a,b,c){var d={shape:null,type:a,row:b,col:c,showThreat:!1};if(lb[b]||(lb[b]=[]),lb[b][c]||(lb[b][c]={}),lb[b][c].piece=d,a==Hb)for(var e=0;W>e;e++)3!=e&&4!=e&&(lb[b][e]||(lb[b][e]={}),lb[b][e].wall=!0);return lb[b][c]}function f(a,b){var c=qb.col,d=qb.row;0>b?b=0:b>=W&&(b=W-1);var e=R.floor(jb),f=nb-2;if(e>a?a=e:a>=f&&(a=f),b!=c||a!=d){var h=lb[d][c];lb[a]||(lb[a]=[]);var j=lb[a][b];if(j||(j={},lb[a][b]=j),!j.wall){var k=g(a,b);k?(qb.invalid=!0,qb.invalidCol=b,qb.invalidRow=a,qb.threateningPiece=k.piece,b=c,a=d):(qb.invalid=!1,j.piece&&i(j.piece),h.piece=null,j.piece=qb),qb.oldCol=c,qb.oldRow=d,qb.anim=!0,qb.animStartTime=db,qb.col=b,qb.row=a}}}function g(a,b){var c;if(c=h(a,b,Fb))return c;if(c=h(a+1,b-1,Bb)||h(a+1,b+1,Bb))return c;var d,e,f;for(e=b-1;e>=0;e--)if(f=h(a,e),f&&f.piece){if(f.piece.type==Cb)return f;break}for(e=b+1;W>=e;e++)if(f=h(a,e),f&&f.piece){if(f.piece.type==Cb)return f;break}for(d=a+1;a+W>=d;d++)if(f=h(d,b),f&&f.piece){if(f.piece.type==Cb)return f;break}for(d=a-1;d>=a-W;d--)if(f=h(d,b),f&&f.piece){if(f.piece.type==Cb)return f;break}for(e=b-1,d=a-1;e>=0;e--,d--)if(f=h(d,e),f&&f.piece){if(f.piece.type==Db)return f;break}for(e=b+1,d=a-1;W>e;e++,d--)if(f=h(d,e),f&&f.piece){if(f.piece.type==Db)return f;break}for(e=b-1,d=a+1;e>=0;e--,d++)if(f=h(d,e),f&&f.piece){if(f.piece.type==Db)return f;break}for(e=b+1,d=a+1;W>e;e++,d++)if(f=h(d,e),f&&f.piece){if(f.piece.type==Db)return f;break}return c=h(a+2,b-1,Eb)||h(a-2,b-1,Eb)||h(a+2,b+1,Eb)||h(a-2,b+1,Eb)||h(a+1,b-2,Eb)||h(a-1,b-2,Eb)||h(a+1,b+2,Eb)||h(a-1,b+2,Eb)}function h(a,b,c){var d=lb[a];if(d){var e=d[b];if(e&&e.piece&&(!c||e.piece.type==c))return e}}function i(a){if(pb.push(a),a.removedTime=db,a.justRemoved=!0,a.showThreat)for(var b=a.row-W;b<a.row+W;b++){var c=lb[b];if(c)for(var d=a.col-W;d<a.col+W;d++)c[d]&&(c[d].showThreat=!1)}}function j(){window.stb&&stb(),gb?0===kc.space&&(k(!1),kc.space=-1):ib?renderHomeScreen():(vb?(yb>=0&&0===kc.space&&(kc.space=-1,yb++,L=null),n()):(l(),m()),o()),window.ste&&ste(),ob&&requestAnimationFrame(j)}function k(a){a!=gb&&(gb=a,gb?fb.style.display="block":(fb.style.display="none",b()))}function l(){if(!(0>=nb||qb.anim||vb)){var a=0,b=0;Mb||((kc.down==Kb||0===kc.down)&&(b=-1),(kc.up==Kb||0===kc.up)&&(b=1),(kc.left==Kb||0===kc.left)&&(a=-1),(kc.right==Kb||0===kc.right)&&(a=1),(a||b)&&(a?(kc.up<=Kb&&kc.up>0&&(b=1),kc.down<=Kb&&kc.down>0&&(b=-1)):(kc.left<=Kb&&kc.left>0&&(a=-1),kc.right<=Kb&&kc.right>0&&(a=1)),f(qb.row+b,qb.col+a),Mb=!0));var c;if(Mb){var d=!0;for(c in jc)if(jc[c]){d=!1;break}Mb=!d}for(c in kc)kc[c]>=1?kc[c]++:kc[c]>Lb&&kc[c]--;if(!qb.anim&&Nb.x>0&&Nb.x<V&&Nb.y>U&&Nb.y<V+U){var e=Nb.x/V,g=(Nb.y-U)/V;s(e,g),Pb=R.floor(s.res.x*W),Ob=R.floor(s.res.y*W+jb),a=Pb-qb.col,b=Ob-qb.row,a>1?a=1:-1>a&&(a=-1),b>1?b=1:-1>b&&(b=-1),Ob=qb.row+b,Pb=qb.col+a,Nb.left&&(a||b)&&(Nb.left=!1,f(Ob,Pb))}else Pb=-1,Ob=-1}}function m(){if(db=Date.now(),K&&(jb+=kb*(db-K)*eb),qb.row<jb-.9)if(hb)if(g(qb.row+1,qb.col))if(g(qb.row+1,qb.col+1)){if(g(qb.row+1,qb.col-1))return void k(!0);f(qb.row+1,qb.col+1)}else f(qb.row+1,qb.col+1);else f(qb.row+1,qb.col);else k(!0);var a=R.floor(jb)+Y;if(!K||a>nb){for(var b,c,d,e=a-Y-5;e>nb-Y-5;e--)if(b=lb[e])for(d=!0,c=0;W>c;c++)b[c]&&b[c].piece&&z(b[c].piece);for(e=nb+1;a>=e;e++)if(b=lb[e])for(d=!0,c=0;W>c;c++){var h=W/2;c%2===0?h+=c/2:h-=(c+1)/2,b[h]&&b[h].piece&&y(b[h].piece)}nb=a}K=db}function n(){console.log(yb);var a=Date.now();-1==yb?(_.style.opacity=0,bb.style.opacity=0,wb=0,m(),K=null,yb=0):0===yb||1==yb||2==yb||3==yb||4==yb||5==yb||6==yb||7==yb||8==yb&&(L||(L=a),xb=(a-L)/4e3,xb>1?yb=9:(xb=R.sin(xb*S/2),wb=(xb-.2)/.6,0>wb?wb=0:wb>1&&(wb=1),_.style.opacity=wb,xb>.8&&(ub.style.opacity=(1-xb)/.2,bb.style.opacity=1-ub.style.opacity))),9==yb&&(vb=!1,wb=1,ub.style.display="none",_.style.opacity=1,bb.style.opacity=1)}function o(){for(var a,b,c=nb-Y-5;nb>=c;c++)if(b=lb[c])for(var d=0;W>d;d++)if(b[d]&&b[d].piece){var e=b[d].piece;p(e.row,e.col,e),q(e),e.y>qb.y&&(!a||a.y>e.y)&&(a=e)}a&&gc.insertBefore(qb.shape,a.shape);var f;if(qb.anim)if(f=qb.invalid?eb*(db-qb.animStartTime)/sb:eb*(db-qb.animStartTime)/rb,0>f||f>=1)qb.anim=!1,qb.invalid&&qb.threateningPiece&&(qb.threateningPiece.shape.style.filter="none"),qb.invalid=!1;else if(f=R.sin(f*S*.5),qb.invalid){p(qb.row,qb.col);var g=.4*(.5>f?f:1-f)*X,h=R.sin(6*f*S)*g;qb.x+=h,q(qb),qb.threateningPiece.shape.style.filter="url(#"+Ib+")"}else p(qb.oldRow,qb.oldCol),qb.opacity=f*qb.opacity+(1-f)*p.res.opacity,qb.scale=f*qb.scale+(1-f)*p.res.scale,qb.x=f*qb.x+(1-f)*p.res.x,qb.y=f*qb.y+(1-f)*p.res.y,q(qb);for(k=0,m=pb.length;m>k;k++){var i=pb[k],j=(db-i.removedTime)/1e3;j>1?(z(i),pb[k]=pb[m-1],m--,k--,pb=pb.slice(0,m)):(i.justRemoved&&(i.justRemoved=!1,i.removedX=i.x,i.removedY=i.y),i.x=i.x<.5*V?i.removedX-j*V:i.removedX+j*V,i.y=i.removedY-R.sin(j*S)*V*.4,q(i))}qb.anim&&qb.invalid?(M||(M={onTop:!0,type:Jb}),M.shape||(y(M),M.row=qb.invalidRow,M.col=qb.invalidCol),p(qb.invalidRow,qb.invalidCol,M),M.scale=1,M.y-=f*M.scale*X*.2,M.opacity=.8>f?1:1-(f-.8)/(1-.8),q(M)):M&&M.shape&&z(M),F($),$.save(),$.translate(0,U),$.fillStyle=Qb,$.beginPath(),$.rect(0,0,V,V),$.fill(),$.clip();var k,l,m,n=R.floor(jb),o=-(jb-R.floor(jb)),s={},t={},u={},v={};for(k=-1;Y>k;k++)for(l=0;W>l;l++){if(r(l/W,(k+o)/W,s),r(l/W,(k+1+o)/W,v),r((l+1)/W,(k+1+o)/W,u),r((l+1)/W,(k+o)/W,t),$.beginPath(),$.moveTo(s.x*V,s.y*V),$.lineTo(t.x*V,t.y*V),$.lineTo(u.x*V,u.y*V),$.lineTo(v.x*V,v.y*V),$.closePath(),$.lineWidth=1,$.fillStyle=-1!=Ob&&-1!=Pb&&k+n==Ob&&l==Pb?Tb:(k+l+n)%2===0?Rb:Sb,$.fill(),b=lb[k+n],b&&b[l]){var w=b[l];w.showThreat&&($.fillStyle="rgba("+Wb+",0.5)",$.fill()),w.checkPoint&&($.fillStyle=Xb,$.fill())}if(qb.invalid&&qb.invalidCol==l&&qb.invalidRow==k+n){var x=1.5*(.5>f?f:1-f);$.fillStyle="rgba("+Wb+","+x+")",$.fill()}}$.restore()}function p(a,b,c){c=c||p.res,r((b+.5)/W,(a-jb+.5)/W);var d=.02,e=1;return r.res.y<Yb?e=0:r.res.y<Zb&&(e=1-(d-r.res.y)/(Zb-Yb)),c.opacity=e,c.x=r.res.x*V,c.y=r.res.y*V+U,c.scale=r.res.scaleX,c}function q(a){a.shape&&(a.shape.style.opacity=a.opacity,a.scale>0&&a.shape.setAttributeNS(null,"transform","scale("+a.scale+") translate("+a.x/a.scale+","+a.y/a.scale+")"))}function r(a,b,c){return c=c||r.res,c.y=t(b,$b,_b,ac),c.scaleX=t(b,bc,cc,dc),c.scaleY=c.scaleX,c.x=(1-c.scaleX)/2+a*c.scaleX,vb&&(c.x=wb*c.x+(1-wb)*a,c.y=wb*c.y+(1-wb)*(1-b),c.scaleX=wb*c.scaleX+1*(1-wb),c.scaleY=c.scaleX),c}function s(a,b,c){c=c||s.res,c.y=u(b,$b,_b,ac,!1);var d=t(c.y,bc,cc,dc);return c.x=(a-(1-d)/2)/d,c}function t(a,b,c,d){return b*a*a+c*a+d}function u(a,b,c,d,e){return e?(-c+R.sqrt(c*c-4*b*(d-a)))/(2*b):(-c-R.sqrt(c*c-4*b*(d-a)))/(2*b)}function v(){Q.appendChild(Z),Z.width=V,Z.height=V+U}function w(){var a=ab,b=a.createLinearGradient(0,0,0,V),c="rgba(10,20,25,",d=")";b.addColorStop(0,c+0+d),b.addColorStop(.2,c+0+d),b.addColorStop(1,c+.5+d),a.fillStyle=b,a.fillRect(0,0,V,V),a.restore(),_.style.top=U+"px",_.style.pointerEvents="none",Q.appendChild(_)}function x(){var a=.02*V;bb.width=V,bb.height=U+a;var b=cb;b.clearRect(0,0,V,V),b.save(),b.fillStyle="#FF8601",b.beginPath(),b.rect(0,0,V,U),b.fill(),b.clip(),b.fillStyle="#FFE7CA";var c=V/4;b.beginPath(),b.arc(V/2,U+.3*c,c,0,S,!0),b.fill(),b.restore(),b.beginPath(),b.fillStyle="rgb(10,20,25)";for(var d=40,e=[0,.7,.1,.3,.2,1,.3,.5,.35,.8,.42,.5,.55,.9,.7,.45,.8,1.1,.88,.4,1,.8],f=0;f<e.length;f+=2){var g=e[f]*V,h=U-d*e[f+1];0===f?b.moveTo(g,h):b.lineTo(g,h)}b.lineTo(V,U),b.lineTo(0,U),b.fill(),b.restore(),b.save(),b.translate(0,U);var i=b.createLinearGradient(0,0,0,a),j="rgba(10,20,25,",k=")";i.addColorStop(0,j+1+k),i.addColorStop(1,j+0+k),b.fillStyle=i,b.fillRect(0,0,V,a),b.restore(),Q.appendChild(bb)}function y(a){var b;if(hc[a.type]||(hc[a.type]=[]),b=hc[a.type].length?hc[a.type].pop():ec(a.type),gc.firstChild&&!a.onTop?gc.insertBefore(b,gc.firstChild):gc.appendChild(b),a.shape)throw new Error;a.shape=b,b.style.filter="none"}function z(a){a.shape&&(hc[a.type].push(a.shape),gc.removeChild(a.shape),a.shape=null)}function A(){function a(a,b,d){var e=O.createElementNS(n,"g");e.setAttributeNS(null,"id",a),d||e.appendChild(c());for(var f=0;f<b.length;f++){var g=b[f];g.setAttributeNS(null,"x",-X/2),g.setAttributeNS(null,"y",-X),e.appendChild(g)}return r.appendChild(e),e}function b(a){var b=O.createElementNS(n,"filter");return b.setAttributeNS(null,"id",a),B(b,{x:"0",y:"0",width:"100%",height:"100%","color-interpolation-filters":"sRGB"}),b.innerHTML='<feFlood flood-color="rgba(255,0,0,0.3)" result="COLOR"></feFlood><feComposite operator="atop" in="COLOR" in2="SourceGraphic"></feComposite>',r.appendChild(b),b}function c(){var a=e(5,8,3.1,1.8);return C(a,"rgba(0,0,0,0.2)","none"),a}function d(a,b,c){var d=O.createElementNS(n,"circle");return B(d,{cx:i(a-s),cy:i(b-t),r:i(c)}),d}function e(a,b,c,d){var e=O.createElementNS(n,"ellipse");return B(e,{cx:i(a-s),cy:i(b-t),rx:i(c),ry:i(d)}),e}function f(a,b){var c=O.createElementNS(n,"path");return c.setAttributeNS(null,"d",g(a)),b&&B(c,b),c}function g(a){for(var b="",c=0;c<a.length;c++){var d=a[c];"object"==typeof d&&(d=i(d[0]-s)+","+i(d[1]-t)),b+=d+" "}return b}function h(a,b){var c=O.createElementNS(n,"use");return B(c,b),c.setAttributeNS(o,"xlink:href","#"+a),c.setAttribute("xmlns:xlink",o),c}function i(a){return.1*R.round(X*a)}function j(a,b){var c=O.createElementNS(n,"text");c.setAttributeNS(null,"id",a),B(c,{x:"-40","font-size":"28",fill:"red",stroke:"black","stroke-width":"1","font-family":"Impact"}),c.innerHTML=b,r.appendChild(c)}function k(){fb=O.createElementNS(n,"g"),fb.style.display="none",fc.appendChild(fb);var a=O.createElementNS(n,"rect");B(a,{x:0,y:0,width:"100%",height:"100%",fill:"rgba(0,0,0,0.5)"}),fb.appendChild(a);var b=O.createElementNS(n,"text");B(b,{x:"50%",y:"50%","font-size":"48px",fill:"orange",stroke:"red","stroke-width":"2px","text-anchor":"middle","font-family":"Impact"}),b.innerHTML="CHECKMATE !",fb.appendChild(b),b=O.createElementNS(n,"text"),B(b,{x:"50%",y:"60%","font-size":"22px",fill:"white",stroke:"black","stroke-width":"1px","text-anchor":"middle","font-family":"Impact"}),b.innerHTML='Press <tspan style="fill:orange;">SPACE</tspan> to restart at last checkpoint',fb.appendChild(b)}function l(){ub=O.createElementNS(n,"g"),fc.appendChild(ub);var a=O.createElementNS(n,"rect");B(a,{x:0,y:0,width:"100%",height:U,fill:Qb,stroke:"#000"}),ub.appendChild(a);var b=O.createElementNS(n,"text");B(b,{x:"50%",y:"60","font-size":"48px",fill:"orange",stroke:"red","stroke-width":"2px","text-anchor":"middle","font-family":"Impact"}),b.innerHTML='CHESS<tspan style="font-style:italic;">PURSUIT</tspan>',ub.appendChild(b)}function m(){tb=O.createElementNS(n,"text"),B(tb,{x:"50%",y:U+V-10,"font-size":"22px",fill:"white",stroke:"black","stroke-width":"1px","text-anchor":"middle","font-family":"Impact"}),tb.innerHTML='Press <tspan style="fill:orange;">SPACE</tspan>',fc.appendChild(tb)}ec=h;var n="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xlink",p=V,q=V+U;fc=O.createElementNS(n,"svg"),fc.setAttribute("xmlns",n),fc.setAttributeNS(null,"viewBox","0 0 "+p+" "+q),fc.setAttributeNS(null,"width",p),fc.setAttributeNS(null,"height",q),Q.appendChild(fc);var r=O.createElementNS(n,"defs");fc.appendChild(r),l(),gc=O.createElementNS(n,"g"),fc.appendChild(gc),b(Ib),j(Jb,"CHECK"),k(),m();var s=5,t=8;C(a(Bb,[f(["M",[2,8],"Q",[5,10],[8,8],"L",[5,3],"L",[2,8]]),d(5,3,2)]),Ub,Vb,0),C(a(Ab,[f(["M",[5,1],"L",[5,-2],"M",[4,-1],"L",[6,-1]],{"stroke-width":3}),f(["M",[2,8],"Q",[5,10],[8,8],"L",[6,3],"L",[7,1],"Q",[5,0],[3,1],"L",[4,3],"L",[2,8]])]),Ub,Vb,0),C(a(Eb,[f(["M",[2,8],"Q",[5,10],[8,8],"L",[7,6],"Q",[8,3],[7,0],"L",[6,1],"L",[5,1],"L",[2,4],"L",[3,5],"L",[5,4],"L",[2,8]])]),Ub,Vb,0),C(a(Cb,[f(["M",[2,8],"Q",[5,10],[8,8],"L",[6.5,3],"L",[8,2],"L",[8,0],"L",[7,0],"L",[7,1],"L",[6,1],"L",[6,0],"L",[4,0],"L",[4,1],"L",[3,1],"L",[3,0],"L",[2,0],"L",[2,2],"L",[3.5,3],"L",[2,8]])]),Ub,Vb,0),C(a(Db,[f(["M",[2,8],"Q",[5,10],[8,8],"L",[6,4],"Q",[8,1.1],[5,0],"Q",[2,1.1],[4,4],"L",[2,8]]),d(5,0,.7),f(["M",[3.8,.8],"L",[4.4,2.5]],{"stroke-width":2})]),Ub,Vb,0),C(a(Gb,[f(["M",[2,8],"Q",[5,10],[8,8],"L",[8.5,6],"L",[7,7],"L",[7,5],"L",[6,6],"L",[5,4.5],"L",[4,6],"L",[3,5],"L",[3,7],"L",[1.5,6],"L",[2,8]])]),Ub,Vb,0),C(a(Fb,[f(["M",[2,8],"Q",[5,10],[8,8],"L",[8.5,6],"L",[7,7],"L",[7,5],"L",[6,6],"L",[5,4.5],"L",[4,6],"L",[3,5],"L",[3,7],"L",[1.5,6],"L",[2,8]])]),Ub,Vb,0),C(a(zb,[f(["M",[5,1],"L",[5,-2],"M",[4,-1],"L",[6,-1]],{"stroke-width":3}),f(["M",[2,8],"Q",[5,10],[8,8],"L",[6,3],"L",[7,1],"Q",[5,0],[3,1],"L",[4,3],"L",[2,8]])]),"#002","#333",0),s=2.5,t=50,C(a(Hb,[f(["M",[25,30],"L",[50,30],"L",[50,5],"L",[45,5],"L",[45,10],"L",[40,10],"L",[40,5],"L",[35,5],"L",[35,10],"L",[30,10],"L",[30,5],"L",[25,5],"L",[25,30]]),f(["M",[0,50],"L",[0,50],"L",[27.5,50],"L",[27.5,35],"L",[47.5,35],"L",[47.5,50],"L",[75,50],"L",[75,20],"L",[70,20],"L",[70,25],"L",[65,25],"L",[65,20],"L",[60,20],"L",[60,25],"L",[55,25],"L",[55,20],"L",[50,20],"L",[50,25],"L",[45,25],"L",[45,20],"L",[40,20],"L",[40,25],"L",[35,25],"L",[35,20],"L",[30,20],"L",[30,25],"L",[25,25],"L",[25,20],"L",[20,20],"L",[20,25],"L",[15,25],"L",[15,20],"L",[10,20],"L",[10,25],"L",[5,25],"L",[5,20],"L",[0,20],"L",[0,50]])],!0),Ub,Vb,0)}function B(a,b){if(b)for(var c in b)a.setAttributeNS(null,c,b[c]);return a}function C(a,b,c,d){var e={};return"undefined"!=typeof b&&(e.fill=b),"undefined"!=typeof c&&(e.stroke=c),"undefined"!=typeof d&&(e.strokeWidth=d),B(a,e),a}function D(a,b,c){var d=O.createElement("canvas");return c&&(d.id=c),d.width=a,d.height=b,d}function E(a){return a.getContext("2d")}function F(a){a.clearRect(0,0,I,J)}function G(a,b){b||(b=window.e);var c=b.keyCode;b.charCode&&!c&&(c=b.charCode);var d=ic[c];d&&jc[d]!==a&&(jc[d]=a,"undefined"==typeof kc[d]&&(kc[d]=-1),a?kc[d]<1&&(console.log("keyDown",d),kc[d]=1):kc[d]>0&&(console.log("keyUp",d),kc[d]=0))}function H(a,b){var c,d;"which"in b?(c=3==b.which,d=2==b.which):"button"in b&&(c=2==b.button,d=1==b.button),c?Nb.right=a:d?Nb.middle=a:Nb.left=a,O.onmousemove(b)}var I,J,K,L,M,N=window,O=N.document,P=O.body,Q=null,R=N.Math,S=R.PI,T=(R.sqrt,R.random,1),U=100*T,V=400*T,W=8,X=V/W,Y=2*W+3,Z=D(V,V,"bg"),$=E(Z),_=D(V,V,"shadow"),ab=E(_),bb=D(V,2*V,"sky"),cb=E(bb),db=0,eb=.001,fb=null,gb=!1,hb=!1,ib=!1,jb=0,kb=1,lb=null,mb=null,nb=-1,ob=!0,pb=[],qb=null,rb=.05,sb=.5,tb=null,ub=null,vb=!0,wb=0,xb=0,yb=-1,zb="h",Ab="e",Bb="p",Cb="r",Db="b",Eb="k",Fb="l",Gb="w",Hb="c",Ib="ef",Jb="ct",Kb=6,Lb=-1,Mb=!1,Nb={},Ob=-1,Pb=-1,Qb="#193441",Rb="#D1DBBD",Sb="#3E606F",Tb="#794",Ub="#eee",Vb="#555",Wb="255,0,0",Xb="rgba(93, 255, 182, 0.56)",Yb=-.02,Zb=.02;p.res={};var $b=3/16,_b=-0.875,ac=1,bc=-2.5/16,cc=0,dc=1;r.res={},s.res={};var ec,fc,gc=null,hc={},ic={37:"left",65:"left",81:"left",38:"up",90:"up",87:"up",83:"down",40:"down",39:"right",68:"right",32:"space",27:"esc",13:"Enter"},jc={},kc={};O.onkeyup=function(a){G(!1,a),27==a.keyCode&&toggleHome(),32==a.keyCode&&ib&&toggleHome()},O.onkeydown=function(a){G(!0,a),jc.esc&&(ob=!ob,console.log("debug toggle anim: ",ob),ob&&(K=Date.now(),j()))},O.onmousedown=function(a){H(!0,a)},O.onmouseup=function(a){H(!1,a)},O.onmousemove=function(a){Nb.x=a.clientX,Nb.y=a.clientY},a()};